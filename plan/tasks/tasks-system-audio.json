{
  "epic": "epic-system-audio",
  "initiative": "session-recorder",
  "generated": "2025-12-17",
  "features": [
    {
      "id": "FEAT-01",
      "name": "Browser Audio Capture API",
      "status": "todo",
      "steps": [
        "Call getDisplayMedia with audio option → Browser permission dialog appears",
        "User selects screen/tab with 'Share audio' enabled → Audio track obtained",
        "Audio track type is 'audio' from MediaStreamTrack",
        "Audio capture works in Chrome browser",
        "Audio capture works in Edge browser",
        "Missing audio permission → Graceful error message displayed"
      ]
    },
    {
      "id": "FEAT-02",
      "name": "Dual-Stream Recording Infrastructure",
      "status": "todo",
      "steps": [
        "Start recording with system_audio_record: true → Two audio streams initialize",
        "Microphone stream captures user voice",
        "System stream captures display audio",
        "Both streams record simultaneously without blocking",
        "Timestamps synchronized between streams (< 100ms drift)",
        "Stop recording → Two separate audio files saved (voice.wav, system.wav)"
      ]
    },
    {
      "id": "FEAT-03",
      "name": "Recording Options API",
      "status": "todo",
      "steps": [
        "SessionRecorder accepts system_audio_record: true option",
        "system_audio_record: false → Only microphone recorded",
        "system_audio_record: true, voice_record: false → Only system audio",
        "Both true → Both streams recorded",
        "Session metadata includes audio source configuration",
        "Audio files listed in session.json with correct paths"
      ]
    },
    {
      "id": "FEAT-04",
      "name": "Source-Attributed Transcription",
      "status": "todo",
      "steps": [
        "Stop recording → Both audio files sent to Whisper",
        "Voice transcript segments have source: 'voice'",
        "System transcript segments have source: 'system'",
        "Merged transcript sorts segments by timestamp chronologically",
        "Word-level timestamps preserved in both sources",
        "Transcript JSON includes source field in each segment"
      ]
    },
    {
      "id": "FEAT-05",
      "name": "Viewer Timeline Updates",
      "status": "todo",
      "steps": [
        "Load session with dual audio → Timeline shows both sources",
        "Voice segments display in blue color",
        "System segments display in green color",
        "Hovering segment shows source label (Voice/System)",
        "Segments appear at correct timestamps on timeline",
        "Overlapping segments from different sources both visible"
      ]
    },
    {
      "id": "FEAT-06",
      "name": "Viewer Transcript Panel Updates",
      "status": "todo",
      "steps": [
        "Load session with dual audio → Transcript panel shows all segments",
        "Voice segments have microphone icon",
        "System segments have speaker/computer icon",
        "Search finds text in both voice and system segments",
        "Click transcript segment → Timeline navigates to that time",
        "Transcript segments interleave correctly by time"
      ]
    },
    {
      "id": "FEAT-07",
      "name": "Audio Playback Controls",
      "status": "todo",
      "steps": [
        "Play button plays both audio streams mixed",
        "Toggle 'Voice Only' → Only microphone audio plays",
        "Toggle 'System Only' → Only system audio plays",
        "Toggle 'Both' → Both streams play simultaneously",
        "Volume controls affect selected streams",
        "Seeking works correctly for both streams"
      ]
    },
    {
      "id": "FEAT-08",
      "name": "Echo Prevention",
      "status": "todo",
      "steps": [
        "Recording config disables echo cancellation for system audio",
        "Recording config disables noise suppression for system audio",
        "Microphone stream uses normal echo cancellation settings",
        "No feedback loop when recording web meeting audio",
        "Documentation includes best practices for dual recording"
      ]
    }
  ]
}
